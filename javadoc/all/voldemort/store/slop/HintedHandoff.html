<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_15) on Wed Jul 13 19:06:34 PDT 2011 -->
<TITLE>
HintedHandoff (Voldemort)
</TITLE>

<META NAME="date" CONTENT="2011-07-13">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HintedHandoff (Voldemort)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/HintedHandoff.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?voldemort/store/slop/HintedHandoff.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="HintedHandoff.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
voldemort.store.slop</FONT>
<BR>
Class HintedHandoff</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>voldemort.store.slop.HintedHandoff</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>HintedHandoff</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Hinted handoff: if, when processing a pipeline for a given request, failures
 shall occur on specific nodes, the requests for these failed nodes should be
 queued up on other, currently available nodes. Semantics of the operation
 should not change i.e., if <code>requires-writes</code> are not met, the
 request should still be considered a failure.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../voldemort/store/slop/HintedHandoff.html#HintedHandoff(voldemort.cluster.failuredetector.FailureDetector, java.util.Map, java.util.Map, voldemort.store.slop.strategy.HintedHandoffStrategy, java.util.List, long)">HintedHandoff</A></B>(<A HREF="../../../voldemort/cluster/failuredetector/FailureDetector.html" title="interface in voldemort.cluster.failuredetector">FailureDetector</A>&nbsp;failureDetector,
              java.util.Map&lt;java.lang.Integer,<A HREF="../../../voldemort/store/Store.html" title="interface in voldemort.store">Store</A>&lt;<A HREF="../../../voldemort/utils/ByteArray.html" title="class in voldemort.utils">ByteArray</A>,<A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>,byte[]&gt;&gt;&nbsp;slopStores,
              java.util.Map&lt;java.lang.Integer,<A HREF="../../../voldemort/store/nonblockingstore/NonblockingStore.html" title="interface in voldemort.store.nonblockingstore">NonblockingStore</A>&gt;&nbsp;nonblockingSlopStores,
              <A HREF="../../../voldemort/store/slop/strategy/HintedHandoffStrategy.html" title="interface in voldemort.store.slop.strategy">HintedHandoffStrategy</A>&nbsp;handoffStrategy,
              java.util.List&lt;<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;failedNodes,
              long&nbsp;timeoutMs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a Hinted Handoff object</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../voldemort/store/slop/HintedHandoff.html#sendHintParallel(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)">sendHintParallel</A></B>(<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;failedNode,
                 <A HREF="../../../voldemort/versioning/Version.html" title="interface in voldemort.versioning">Version</A>&nbsp;version,
                 <A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>&nbsp;slop)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Like <A HREF="../../../voldemort/store/slop/HintedHandoff.html#sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)"><CODE>sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, Slop)</CODE></A>,
 but doesn't block the pipeline.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../voldemort/store/slop/HintedHandoff.html#sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)">sendHintSerial</A></B>(<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;failedNode,
               <A HREF="../../../voldemort/versioning/Version.html" title="interface in voldemort.versioning">Version</A>&nbsp;version,
               <A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>&nbsp;slop)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a hint of a request originally meant for the failed node to another
 node in the ring, as selected by the <A HREF="../../../voldemort/store/slop/strategy/HintedHandoffStrategy.html" title="interface in voldemort.store.slop.strategy"><CODE>HintedHandoffStrategy</CODE></A>
 implementation passed in the constructor</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="HintedHandoff(voldemort.cluster.failuredetector.FailureDetector, java.util.Map, java.util.Map, voldemort.store.slop.strategy.HintedHandoffStrategy, java.util.List, long)"><!-- --></A><H3>
HintedHandoff</H3>
<PRE>
public <B>HintedHandoff</B>(<A HREF="../../../voldemort/cluster/failuredetector/FailureDetector.html" title="interface in voldemort.cluster.failuredetector">FailureDetector</A>&nbsp;failureDetector,
                     java.util.Map&lt;java.lang.Integer,<A HREF="../../../voldemort/store/Store.html" title="interface in voldemort.store">Store</A>&lt;<A HREF="../../../voldemort/utils/ByteArray.html" title="class in voldemort.utils">ByteArray</A>,<A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>,byte[]&gt;&gt;&nbsp;slopStores,
                     java.util.Map&lt;java.lang.Integer,<A HREF="../../../voldemort/store/nonblockingstore/NonblockingStore.html" title="interface in voldemort.store.nonblockingstore">NonblockingStore</A>&gt;&nbsp;nonblockingSlopStores,
                     <A HREF="../../../voldemort/store/slop/strategy/HintedHandoffStrategy.html" title="interface in voldemort.store.slop.strategy">HintedHandoffStrategy</A>&nbsp;handoffStrategy,
                     java.util.List&lt;<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;failedNodes,
                     long&nbsp;timeoutMs)</PRE>
<DL>
<DD>Create a Hinted Handoff object
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>failureDetector</CODE> - The failure detector<DD><CODE>nonblockingSlopStores</CODE> - A map of node ids to nonb-locking slop stores<DD><CODE>slopStores</CODE> - A map of node ids to blocking slop stores<DD><CODE>handoffStrategy</CODE> - The <A HREF="../../../voldemort/store/slop/strategy/HintedHandoffStrategy.html" title="interface in voldemort.store.slop.strategy"><CODE>HintedHandoffStrategy</CODE></A> implementation<DD><CODE>failedNodes</CODE> - A list of nodes in the original preflist for the
        request that have failed or are unavailable<DD><CODE>timeoutMs</CODE> - Timeout for slop stores</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="sendHintParallel(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)"><!-- --></A><H3>
sendHintParallel</H3>
<PRE>
public void <B>sendHintParallel</B>(<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;failedNode,
                             <A HREF="../../../voldemort/versioning/Version.html" title="interface in voldemort.versioning">Version</A>&nbsp;version,
                             <A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>&nbsp;slop)</PRE>
<DL>
<DD>Like <A HREF="../../../voldemort/store/slop/HintedHandoff.html#sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)"><CODE>sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, Slop)</CODE></A>,
 but doesn't block the pipeline. Intended for handling prolonged failures without
 incurring a performance cost.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../voldemort/store/slop/HintedHandoff.html#sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)"><CODE>sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, Slop)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="sendHintSerial(voldemort.cluster.Node, voldemort.versioning.Version, voldemort.store.slop.Slop)"><!-- --></A><H3>
sendHintSerial</H3>
<PRE>
public boolean <B>sendHintSerial</B>(<A HREF="../../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;failedNode,
                              <A HREF="../../../voldemort/versioning/Version.html" title="interface in voldemort.versioning">Version</A>&nbsp;version,
                              <A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop">Slop</A>&nbsp;slop)</PRE>
<DL>
<DD>Send a hint of a request originally meant for the failed node to another
 node in the ring, as selected by the <A HREF="../../../voldemort/store/slop/strategy/HintedHandoffStrategy.html" title="interface in voldemort.store.slop.strategy"><CODE>HintedHandoffStrategy</CODE></A>
 implementation passed in the constructor
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>failedNode</CODE> - The node the request was originally meant for<DD><CODE>version</CODE> - The version of the request's object<DD><CODE>slop</CODE> - The hint
<DT><B>Returns:</B><DD>True if persisted on another node, false otherwise</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/HintedHandoff.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../voldemort/store/slop/Slop.html" title="class in voldemort.store.slop"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?voldemort/store/slop/HintedHandoff.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="HintedHandoff.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Jay Kreps, Roshan Sumbaly, Alex Feinberg, Bhupesh Bansal, Lei Gao
</BODY>
</HTML>
